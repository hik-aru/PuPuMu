<%= render 'header' %>
<%= stylesheet_link_tag "dm/direct-message.css", :media => "all" %>


<div class="body">
<h1 class="center">DM</h1>
  <div class="container">
    <div class="col-md-12 col-lg-6">
      <div class="panel">
      	<!--Heading-->
    	  <div class="panel-heading"> 
    	  	<h3 class="panel-title">Direct Message</h3>
        </div>

        <!--Widget body-->
    	  <div id="demo-chat-body" class="collapse in">
    	  	<div class="nano has-scrollbar" style="height:470px">
    	  		<div class="nano-content pad-all" tabindex="0" style="right: -17px;">
              <ul class="list-unstyled media-block">
              <% if @messages.present? %>
              <% @messages.each do |m| %>
                <% if m.user_id == @current_user.id %>
              
    	  				  <li class="mar-btm">
    	  				  	<div class="media-left">
                      <%= image_tag(m.user.image.to_s, :class => "img-circle img-sm") %>
    	  				  	</div>
    	  				  	<div class="media-body pad-hor">
    	  				  		<div class="speech">
    	  				  			<a href="#" class="media-heading"><%= m.user.user_name %></a>
    	  				  			<p><%= m.content %></p>
    	  				  			<p class="speech-time">
    	  				  			<i class="fa fa-clock-o fa-fw"></i><%= m.created_at %>
    	  				  			</p>
    	  				  		</div>
    	  				  	</div>
                  </li>
                <% else %>
    	  				  <li class="mar-btm">
    	  				  	<div class="media-right">
                      <%= image_tag(m.user.image.to_s, :class => "img-circle img-sm") %>
    	  				  	</div>
    	  				  	<div class="media-body pad-hor speech-right">
    	  				  		<div class="speech">
    	  				  			<a href="#" class="media-heading"><%= m.user.user_name %></a>
    	  				  			<p><%= m.content %></p>
    	  				  			<p class="speech-time">
    	  				  				<i class="fa fa-clock-o fa-fw"></i><%= m.created_at %>
    	  				  			</p>
    	  				  		</div>
    	  				  	</div>
                  </li>
                <% end %>
              <% end %>
              <% end %>
    	  		</ul>
          </div>
              
    	  	<div class="nano-pane"><div class="nano-slider" style="height: 141px; transform: translate(0px, 0px);"></div></div></div>

    	  	<!--Widget footer-->
    	  	<div class="panel-footer">
            <div class="row">
            <%= form_for @message do |f| %>
              <div class="col-xs-9">
                <%= f.text_field :content, :class => "form-control chat-input", :placeholder => "Enter your text", :size => 70 %>
    	  				<%= f.hidden_field :room_id, :value => @room.id %>   
    	  			</div>
              <div class="col-xs-3">
                <%= f.submit "Send", :class => "btn btn-primary btn-block" %>
              </div>
            <% end %>
    	  		</div>
    	  	</div>
    	  </div>
      </div>
    </div>
	</div>
	
</div>
